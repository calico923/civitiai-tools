# ğŸš€ CivitAI Downloader v2

**ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´šAIãƒ¢ãƒ‡ãƒ«ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **

ãƒãƒ«ã‚¯æ“ä½œã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã€åˆ†ææ©Ÿèƒ½ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®ä¿¡é ¼æ€§ã‚’å‚™ãˆãŸã€CivitAIã‹ã‚‰AIãƒ¢ãƒ‡ãƒ«ã‚’ç™ºè¦‹ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ç®¡ç†ã™ã‚‹ãŸã‚ã®åŒ…æ‹¬çš„ãªé«˜æ€§èƒ½ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

[![Tests](https://img.shields.io/badge/tests-112%20passed-brightgreen)]() [![Coverage](https://img.shields.io/badge/coverage-100%25-brightgreen)]() [![Quality](https://img.shields.io/badge/quality-production%20ready-blue)]()

## âœ¨ ä¸»è¦æ©Ÿèƒ½

### ğŸ” **é«˜åº¦ãªæ¤œç´¢ãƒ»ç™ºè¦‹æ©Ÿèƒ½**
- **ãƒ‡ãƒ¥ã‚¢ãƒ«æ¤œç´¢æˆ¦ç•¥**: ç›´æ¥ã‚¿ã‚°æ¤œç´¢ + ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- **85ä»¥ä¸Šã®APIãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**: å®Œå…¨ãªãƒ¢ãƒ‡ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åé›†  
- **15ã‚«ãƒ†ã‚´ãƒª**: åŒ…æ‹¬çš„ãªãƒ¢ãƒ‡ãƒ«åˆ†é¡
- **ã‚¹ãƒãƒ¼ãƒˆé‡è¤‡é™¤å»**: ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªé‡è¤‡æ’é™¤

### ğŸ“¥ **ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç®¡ç†**
- **ãƒãƒ«ã‚¯æ“ä½œ**: æ•°ç™¾ã®ãƒ¢ãƒ‡ãƒ«ã‚’åŠ¹ç‡çš„ã«å‡¦ç†
- **å†é–‹æ©Ÿèƒ½**: è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å†é–‹
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³**: ãƒãƒ«ã‚¦ã‚§ã‚¢æ¤œå‡ºã¨ãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: é©å¿œçš„ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†

### ğŸ›¡ï¸ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹**
- **å¤šå±¤ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æš—å·åŒ–ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã€ç›£æŸ»è¨¼è·¡
- **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç®¡ç†**: è‡ªå‹•ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æº–æ‹ ãƒã‚§ãƒƒã‚¯
- **ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œ**: å®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ç’°å¢ƒ
- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·**: æœ‰åäººã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### ğŸ“Š **åˆ†æãƒ»ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹**
- **ä½¿ç”¨çŠ¶æ³åˆ†æ**: åŒ…æ‹¬çš„ãªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ä½¿ç”¨çŠ¶æ³ã®æ´å¯Ÿ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™**: ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ–æ¨å¥¨äº‹é …
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ãƒãƒ¼ãƒˆ**: HTML/JSON/CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼
- **äºˆæ¸¬åˆ†æ**: ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡äºˆæ¸¬

### ğŸ”§ **ä¿¡é ¼æ€§ãƒ»æ‹¡å¼µæ€§**  
- **ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼**: è‡ªå‹•éšœå®³åˆ†é›¢
- **ãƒ˜ãƒ«ã‚¹ç›£è¦–**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ã‚«ã‚¹ã‚¿ãƒ æ©Ÿèƒ½æ‹¡å¼µ
- **APIå¤‰æ›´æ¤œçŸ¥**: APIæ›´æ–°ã¸ã®è‡ªå‹•é©å¿œ

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/civitai-downloader-v2.git
cd civitai-downloader-v2

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cp config/app_config.yml.example config/app_config.yml
```

### 2. è¨­å®š

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š

```bash
# è¨­å®šã‚’ç·¨é›†
nano config/app_config.yml
```

**å¿…é ˆè¨­å®š:**
```yaml
api:
  civitai_api_key: "YOUR_API_KEY_HERE"
  base_url: "https://civitai.com/api/v1"
  rate_limit: 0.5  # 1ç§’ã‚ãŸã‚Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°

download:
  base_directory: "./downloads"
  concurrent_downloads: 3
  verify_checksums: true
  
security:
  enable_scanning: true
  require_confirmation: true
  allow_nsfw: false
```

### 3. åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```bash
# ãƒ¢ãƒ‡ãƒ«ã‚’æ¤œç´¢ã—ã¦è¡¨ç¤ºï¼ˆæ¤œç´¢èªã¯è‹±èªã§ï¼‰
python -m src.cli.main search "anime character" --limit 10

# ç‰¹å®šã®ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
python -m src.cli.main download --model-id 12345

# ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã‚’è¡¨ç¤º
python -m src.cli.main info 12345

# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³
python -m src.cli.main scan path/to/model.safetensors

# è¨­å®šã‚’è¡¨ç¤º
python -m src.cli.main config --list
```

## ğŸ“– å®Œå…¨ä½¿ç”¨ã‚¬ã‚¤ãƒ‰

> **ğŸ“ æ³¨æ„**: æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯è‹±èªã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚CivitAI APIã¯è‹±èªã§ã®æ¤œç´¢ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ğŸ” æ¤œç´¢æ“ä½œ

#### åŸºæœ¬æ¤œç´¢
```bash
# ã‚¯ã‚¨ãƒªã§æ¤œç´¢ï¼ˆæ¤œç´¢èªã¯è‹±èªï¼‰
python -m src.cli.main search "cyberpunk style" --limit 10

# ãƒ¢ãƒ‡ãƒ«ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿  
python -m src.cli.main search "character" --types Checkpoint,LORA --limit 10

# è¤‡æ•°ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢
python -m src.cli.main search "anime portrait" --limit 5

# æ¤œç´¢çµæœã‚’ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¤º
python -m src.cli.main search "landscape" --limit 5 --format table

# NSFWå«ã‚€æ¤œç´¢
python -m src.cli.main search "style" --nsfw --limit 5
```

#### æ¤œç´¢çµæœã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
```bash
# JSONå½¢å¼ã§ä¿å­˜
python -m src.cli.main search "mecha" --limit 20 --output mecha_models.json

# æ¤œç´¢çµæœã®è©³ç´°è¡¨ç¤º
python -m src.cli.main search "fantasy" --limit 10 --format json

# ã‚·ãƒ³ãƒ—ãƒ«å½¢å¼ã§è¡¨ç¤º  
python -m src.cli.main search "landscape" --limit 5 --format simple
```

### ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ“ä½œ

#### å˜ä½“ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```bash
# ãƒ¢ãƒ‡ãƒ«IDã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
python -m src.cli.main download 123456

# ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã‚’è©³ã—ãè¡¨ç¤º
python -m src.cli.main info 123456

# ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã‚’è©³ç´°è¡¨ç¤ºã—ã¦ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
python -m src.cli.main info 123456 --detailed
python -m src.cli.main download 123456
```

#### ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³
python -m src.cli.main scan ./downloads/model.safetensors

# è©³ç´°ãªã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’è¡¨ç¤º
python -m src.cli.main scan ./downloads/model.safetensors --detailed

# ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³
find ./downloads -name "*.safetensors" -exec python -m src.cli.main scan {} \;
```

#### è¨­å®šç®¡ç†
```bash
# ç¾åœ¨ã®è¨­å®šã‚’è¡¨ç¤º
python -m src.cli.main config --list

# ç‰¹å®šã®è¨­å®šå€¤ã‚’å–å¾—
python -m src.cli.main config --get api.base_url

# è¨­å®šå€¤ã‚’å¤‰æ›´
python -m src.cli.main config --set "download.max_concurrent=5"

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
python -m src.cli.main config --edit
```

### ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†

#### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
```bash
# ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’è¡¨ç¤º
python -m src.cli.main version

# ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ï¼ˆè©³ç´°ï¼‰
python -m src.cli.main version --detailed

# åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ä¸€è¦§
python -m src.cli.main --help
```

#### å®Ÿç”¨çš„ãªä½¿ç”¨ä¾‹
```bash
# äººæ°—ã®ã‚¢ãƒ‹ãƒ¡ã‚¹ã‚¿ã‚¤ãƒ«ãƒ¢ãƒ‡ãƒ«ã‚’æ¤œç´¢
python -m src.cli.main search "anime style" --limit 10 --format table

# ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆç”¨ãƒ¢ãƒ‡ãƒ«ã‚’æ¢ã™
python -m src.cli.main search "portrait" --types LORA --limit 5

# ç‰¹å®šãƒ¢ãƒ‡ãƒ«ã®è©³ç´°æƒ…å ±ã‚’å–å¾—
python -m src.cli.main info 1800398

# æ¤œç´¢çµæœã‚’JSONã§ä¿å­˜
python -m src.cli.main search "cyberpunk" --limit 20 --output cyberpunk_models.json
```

### ğŸ“š å®Ÿè·µçš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹

#### 1. æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã«ãƒ¢ãƒ‡ãƒ«ã‚’æ¢ã™
```bash
# 1. ã¾ãšã‚¢ãƒ‹ãƒ¡ã‚¹ã‚¿ã‚¤ãƒ«ã®Checkpointãƒ¢ãƒ‡ãƒ«ã‚’æ¤œç´¢
python -m src.cli.main search "anime checkpoint" --types Checkpoint --limit 10 --format table

# 2. æ°—ã«ãªã‚‹ãƒ¢ãƒ‡ãƒ«ã®è©³ç´°ã‚’ç¢ºèª
python -m src.cli.main info 1800398

# 3. ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
python -m src.cli.main download 1800398

# 4. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³
python -m src.cli.main scan downloads/model_name.safetensors
```

#### 2. ç‰¹å®šã‚¹ã‚¿ã‚¤ãƒ«ç”¨ã®LoRAã‚’åé›†
```bash
# 1. ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆç”¨ã®LoRAã‚’æ¤œç´¢
python -m src.cli.main search "portrait style" --types LORA --limit 15 --format table

# 2. çµæœã‚’JSONã§ä¿å­˜
python -m src.cli.main search "portrait style" --types LORA --limit 30 --output portrait_loras.json

# 3. è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã‚’ç¢ºèª
python -m src.cli.main info 1796682
python -m src.cli.main info 1796959
```

#### 3. ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
```bash
# 1. è¨­å®šã®ç¢ºèª
python -m src.cli.main config --list

# 2. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç¢ºèª
ls -la downloads/

# 3. ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
find downloads/ -name "*.safetensors" | head -5 | while read file; do 
    echo "Scanning: $file"
    python -m src.cli.main scan "$file"
done

# 4. è¨­å®šã®èª¿æ•´
python -m src.cli.main config --set "download.max_concurrent=3"
```

## ğŸ—ï¸ é«˜åº¦ãªä½¿ç”¨æ–¹æ³•

### Python API

#### ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢
```python
from src.core.search.advanced_search import AdvancedSearchEngine
from src.api.client import CivitAIClient
from src.data.database import DatabaseManager

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆæœŸåŒ–
client = CivitAIClient()
db = DatabaseManager()
search_engine = AdvancedSearchEngine(client, db)

# é«˜åº¦ãªæ¤œç´¢ã‚’å®Ÿè¡Œ
results = await search_engine.search(
    query="ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«",
    filters={
        "types": ["LORA", "LoCon"],
        "base_models": ["SDXL 1.0", "Pony"],
        "min_downloads": 500,
        "categories": ["style", "concept"]
    },
    limit=100
)

print(f"{len(results)}å€‹ã®ãƒ¢ãƒ‡ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ")
```

#### ãƒãƒ«ã‚¯æ“ä½œ
```python
from src.core.bulk.download_manager import BulkDownloadManager
from src.core.performance.optimizer import PerformanceOptimizer

# æœ€é©åŒ–ã•ã‚ŒãŸãƒãƒ«ã‚¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’ä½œæˆ
optimizer = PerformanceOptimizer()
bulk_manager = BulkDownloadManager(
    download_manager=download_manager,
    optimizer=optimizer,
    db_manager=db
)

# ãƒãƒ«ã‚¯ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã—ã¦é–‹å§‹
job = await bulk_manager.create_bulk_job(
    name="ã‚¹ã‚¿ã‚¤ãƒ«ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³",
    items=search_results,
    options={
        "batch_size": 10,
        "priority": "HIGH",
        "verify_hashes": True
    }
)

# é€²è¡ŒçŠ¶æ³ã‚’ç›£è¦–
async for progress in bulk_manager.monitor_job(job.id):
    print(f"é€²è¡ŒçŠ¶æ³: {progress.completed}/{progress.total}")
```

#### åˆ†æçµ±åˆ
```python
from src.core.analytics import AnalyticsCollector, AnalyticsAnalyzer

# åˆ†æã‚’åˆæœŸåŒ–
collector = AnalyticsCollector(db_manager)
analyzer = AnalyticsAnalyzer(collector)

# ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
report = await analyzer.generate_report(
    start_time=time.time() - 2592000,  # 30æ—¥å‰
    end_time=time.time(),
    metrics=['downloads', 'performance', 'usage']
)

print(f"ç·ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°: {report.summary['downloads']['total']}")
print(f"æˆåŠŸç‡: {report.summary['downloads']['success_rate']:.1f}%")
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
civitai-downloader-v2/
â”œâ”€â”€ src/                          # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ api/                      # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤
â”‚   â”‚   â”œâ”€â”€ client.py            # ãƒ¡ã‚¤ãƒ³CivitAI APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ auth.py              # èªè¨¼ç®¡ç†
â”‚   â”‚   â””â”€â”€ cache.py             # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚   â”œâ”€â”€ core/                    # ã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ search/              # æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ download/            # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ bulk/                # ãƒãƒ«ã‚¯æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ analytics/           # åˆ†æã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”œâ”€â”€ security/            # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ performance/         # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
â”‚   â”‚   â””â”€â”€ config/              # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ cli/                     # ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ main.py              # CLIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ data/                    # ãƒ‡ãƒ¼ã‚¿å±¤
â”‚   â”‚   â”œâ”€â”€ database.py          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†
â”‚   â”‚   â””â”€â”€ models/              # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ ui/                      # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚       â”œâ”€â”€ dashboard.py         # Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚       â””â”€â”€ progress.py          # é€²è¡ŒçŠ¶æ³è¡¨ç¤º
â”œâ”€â”€ tests/                       # ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆ112ãƒ†ã‚¹ãƒˆï¼‰
â”œâ”€â”€ config/                      # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ data/                        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ docs/                        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ downloads/                   # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«
â””â”€â”€ logs/                        # ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### å®Œå…¨ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®å®Ÿè¡Œ
```bash
# å…¨ãƒ†ã‚¹ãƒˆï¼ˆ112ãƒ†ã‚¹ãƒˆï¼‰
python -m pytest tests/ -v

# çµ±åˆãƒ†ã‚¹ãƒˆã®ã¿
python -m pytest tests/integration/ -v

# ç‰¹å®šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
python -m pytest tests/unit/test_advanced_search.py -v
python -m pytest tests/unit/test_bulk_download.py -v
python -m pytest tests/unit/test_analytics_comprehensive.py -v
```

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
python -m pytest tests/ --cov=src --cov-report=html --cov-report=term

# HTMLã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º
open htmlcov/index.html
```

## âš™ï¸ è¨­å®šãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ãƒ¡ã‚¤ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (`config/app_config.yml`)

```yaml
# APIè¨­å®š
api:
  civitai_api_key: "${CIVITAI_API_KEY}"
  base_url: "https://civitai.com/api/v1"
  timeout: 30
  max_retries: 3
  rate_limit: 0.5  # 1ç§’ã‚ãŸã‚Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°

# ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰è¨­å®š  
download:
  base_directory: "./downloads"
  concurrent_downloads: 3
  chunk_size: 8192
  verify_checksums: true
  organize_by_type: true

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
security:
  enable_scanning: true
  max_file_size: 10737418240  # 10GB
  scan_timeout: 300
  require_confirmation: true
  allow_nsfw: false
  
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
database:
  url: "sqlite:///data/civitai.db"
  connection_pool_size: 5
  enable_optimization: true

# ãƒ­ã‚®ãƒ³ã‚°è¨­å®š
logging:
  level: "INFO"
  file: "logs/civitai-downloader.log"
  max_size_mb: 100
  backup_count: 5

# åˆ†æè¨­å®š
analytics:
  enable_collection: true
  retention_days: 90
  report_formats: ["html", "json"]
```

### ç’°å¢ƒå¤‰æ•°

| å¤‰æ•° | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|------|------|------------|
| `CIVITAI_API_KEY` | CivitAI APIã‚­ãƒ¼ | *å¿…é ˆ* |
| `CIVITAI_DOWNLOAD_DIR` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | `./downloads` |
| `CIVITAI_LOG_LEVEL` | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« | `INFO` |
| `CIVITAI_DATABASE_URL` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URL | `sqlite:///data/civitai.db` |

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### APIæ¥ç¶šå•é¡Œ
```bash
# APIæ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆ
python -m src.cli.main config test-connection

# APIã‚­ãƒ¼ã®æœ‰åŠ¹æ€§ã‚’ãƒã‚§ãƒƒã‚¯
python -m src.cli.main config validate
```

#### ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å•é¡Œ
```bash
# ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’ãƒã‚§ãƒƒã‚¯
python -m src.cli.main health-check

# å¤±æ•—ã—ãŸãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’å†é–‹
python -m src.cli.main download --model-id 123456 --resume

# ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
python -m src.cli.main cache clear
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
```bash
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¨å¥¨äº‹é …ã‚’å–å¾—
python -m src.cli.main analytics --type performance --show-recommendations

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æœ€é©åŒ–
python -m src.cli.main db-optimize

# å¤ã„ãƒ­ã‚°ã‚’ã‚¯ãƒªã‚¢
python -m src.cli.main logs clean --older-than 30d
```

### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚®ãƒ³ã‚°ã‚’æœ‰åŠ¹åŒ–
python -m src.cli.main config set logging.level DEBUG

# è©³ç´°å‡ºåŠ›ã§å®Ÿè¡Œ
python -m src.cli.main search "ãƒ†ã‚¹ãƒˆ" --verbose --debug
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³**: è‡ªå‹•ãƒãƒ«ã‚¦ã‚§ã‚¢æ¤œå‡º
- **ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼**: SHA256/BLAKE3æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯  
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹æ¨©é™
- **ç›£æŸ»ãƒ­ã‚°**: å®Œå…¨ãªæ´»å‹•è¿½è·¡
- **æš—å·åŒ–**: å¤šãƒ¬ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿ä¿è­·

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```bash
# ã™ã¹ã¦ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–
python -m src.cli.main config set security.enable_scanning true
python -m src.cli.main config set security.verify_checksums true
python -m src.cli.main config set security.require_confirmation true

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã‚’å®Ÿè¡Œ
python -m src.cli.main security-audit

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å®šç¾©ã‚’æ›´æ–°
python -m src.cli.main security-update
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### è‡ªå‹•æœ€é©åŒ–
```bash
# é©å¿œæœ€é©åŒ–ã‚’æœ‰åŠ¹åŒ–
python -m src.cli.main config set performance.optimization_mode adaptive

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç›£è¦–
python -m src.cli.main metrics --component download --live
```

### æ‰‹å‹•èª¿æ•´
```bash
# ã‚·ã‚¹ãƒ†ãƒ ã«åŸºã¥ã„ã¦åŒæ™‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ã‚’èª¿æ•´
python -m src.cli.main config set download.concurrent_downloads 5

# å¸¯åŸŸå¹…å‘ã‘ã«æœ€é©åŒ–
python -m src.cli.main config set download.chunk_size 16384

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
python -m src.cli.main db-optimize
```

## ğŸš€ ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
```bash
# Dockerãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
docker-compose up -d

# Kubernetesãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ  
kubectl apply -f deployment/k8s/
```

### ç›£è¦–
```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
curl http://localhost:8080/health

# ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
curl http://localhost:8080/metrics
```

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
python -m src.cli.main backup --output civitai_backup_20250122.tar.gz

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
python -m src.cli.main restore --input civitai_backup_20250122.tar.gz
```

## ğŸ¤ è²¢çŒ®

1. **ãƒ•ã‚©ãƒ¼ã‚¯** ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã™ã‚‹
2. **ä½œæˆ** æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ: `git checkout -b feature/amazing-feature`
3. **ã‚³ãƒŸãƒƒãƒˆ** å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ: `git commit -m 'Add amazing feature'`
4. **ãƒ—ãƒƒã‚·ãƒ¥** ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥: `git push origin feature/amazing-feature`
5. **æå‡º** ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æå‡º

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# é–‹ç™ºä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements-dev.txt

# ãƒ—ãƒªã‚³ãƒŸãƒƒãƒˆãƒ•ãƒƒã‚¯ã‚’è¨­å®š
pre-commit install

# ã‚³ãƒŸãƒƒãƒˆå‰ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
python -m pytest tests/
```

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã‚‚ã¨ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ - è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ™ è¬è¾

- åŒ…æ‹¬çš„ãªAPIã‚’æä¾›ã—ã¦ãã‚ŒãŸCivitAI
- ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¦ãã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚ˆã‚Šè‰¯ãã™ã‚‹ãŸã‚ã«è²¢çŒ®ã—ã¦ãã‚ŒãŸã™ã¹ã¦ã®è²¢çŒ®è€…

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [å®Œå…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](docs/README.md)
- **Issue**: [GitHub Issues](https://github.com/your-org/civitai-downloader-v2/issues)
- **Discord**: [ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£Discord](https://discord.gg/your-server)

---

**AI Art ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãŸã‚ã« â¤ï¸ ã‚’è¾¼ã‚ã¦ä½œæˆ**

*æœ€çµ‚æ›´æ–°: 2025å¹´1æœˆ*