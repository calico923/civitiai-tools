# CivitAI 公式 vs 発見機能 比較表

## 📋 概要

CivitAI の**公式ドキュメント**と**実地調査**で発見された機能を詳細比較し、公式・非公式機能を分類したドキュメントです。

**調査日時**: 2025年07月18日  
**調査範囲**: API v1 全エンドポイント + WebUI機能  
**参考文献**: [CivitAI Developer Portal](https://developer.civitai.com/docs/api/public-rest)

---

## 🚀 エンドポイント比較

### Models エンドポイント (`/api/v1/models`)

| 機能カテゴリ | 公式対応 | 発見機能 | ステータス |
|-------------|----------|---------|-----------|
| **基本エンドポイント** | ✅ | ✅ | 公式 |
| **レスポンス形式** | ✅ | ✅ | 公式 |
| **ページネーション** | ✅ | ✅ | 公式 |

### その他エンドポイント

| エンドポイント | 公式対応 | 発見結果 | ステータス |
|---------------|----------|---------|-----------|
| `/images` | ✅ | ✅ | 公式 |
| `/users` | ❌ | ✅ | **非公式** |
| `/tags` | ❌ | ✅ | **非公式** |
| `/creators` | ✅ | ✅ | 公式 |

---

## 🔍 検索パラメータ比較

### ✅ 公式対応パラメータ

| パラメータ | 公式記載値 | 発見値 | ステータス |
|-----------|-----------|-------|-----------|
| **`limit`** | 1-100 (default 100) | 1-100 | 公式 |
| **`page`** | number | number | 公式 |
| **`query`** | string | string | 公式 |
| **`tag`** | string | string | 公式 |
| **`username`** | string | string | 公式 |
| **`nsfw`** | boolean | boolean | 公式 |
| **`primaryFileOnly`** | boolean | boolean | 公式 |
| **`allowNoCredit`** | boolean | boolean | 公式 |
| **`allowDerivatives`** | boolean | boolean | 公式 |
| **`allowDifferentLicenses`** | boolean | boolean | 公式 |
| **`supportsGeneration`** | boolean | boolean | 公式 |

### 🆕 発見された非公式パラメータ

| パラメータ | 公式記載 | 発見機能 | リスク |
|-----------|----------|---------|--------|
| **`category`** | ❌ | ✅ 15種類のカテゴリ | 🟡 中 |
| **`sortBy`** | ❌ | ✅ `models_v9:field:direction` | 🔴 高 |
| **`baseModels`** | ❌ | ✅ 50+ ベースモデル | 🟡 中 |
| **`minDownloads`** | ❌ | ✅ 数値範囲 | 🟡 中 |
| **`maxDownloads`** | ❌ | ✅ 数値範囲 | 🟡 中 |
| **`startDate`** | ❌ | ✅ 日付フィルタ | 🟡 中 |
| **`endDate`** | ❌ | ✅ 日付フィルタ | 🟡 中 |

---

## 📊 モデルタイプ比較

### ✅ 公式記載タイプ

| タイプ | 公式対応 | 発見確認 | 件数 |
|-------|----------|---------|------|
| **Checkpoint** | ✅ | ✅ | 11,694個 |
| **TextualInversion** | ✅ | ✅ | 確認済み |
| **Hypernetwork** | ✅ | ✅ | 確認済み |
| **AestheticGradient** | ✅ | ✅ | 確認済み |
| **LORA** | ✅ | ✅ | 21,220個 |
| **Controlnet** | ✅ | ❌ | エラー |
| **Poses** | ✅ | ✅ | 確認済み |

### 🆕 発見された非公式タイプ

| タイプ | 公式記載 | 発見確認 | 件数 |
|-------|----------|---------|------|
| **LoCon** | ❌ | ✅ | 6,029個 |
| **DoRA** | ❌ | ✅ | 確認済み |
| **Workflows** | ❌ | ✅ | 確認済み |
| **Upscaler** | ❌ | ✅ | 確認済み |
| **VAE** | ❌ | ✅ | 確認済み |
| **Wildcards** | ❌ | ✅ | 確認済み |
| **Other** | ❌ | ✅ | 確認済み |

---

## 🎯 ソート機能比較

### ✅ 公式ソートオプション

| ソート | 公式記載 | 発見確認 | API対応 |
|-------|----------|---------|---------|
| **Highest Rated** | ✅ | ✅ | ✅ |
| **Most Downloaded** | ✅ | ✅ | ✅ |
| **Newest** | ✅ | ✅ | ✅ |

### 🆕 発見された非公式ソート

| ソート | 公式記載 | 発見確認 | API対応 | リスク |
|-------|----------|---------|---------|--------|
| **Most Liked** | ❌ | ✅ | ✅ | 🟡 中 |
| **Most Discussed** | ❌ | ✅ | ✅ | 🟡 中 |
| **Most Collected** | ❌ | ✅ | ✅ | 🟡 中 |
| **Most Images** | ❌ | ✅ | ✅ | 🟡 中 |
| **Oldest** | ❌ | ✅ | ✅ | 🟡 中 |
| **Relevancy** | ❌ | ✅ | ✅ | 🟡 中 |
| **Most Buzz** | ❌ | ✅ | `sortBy`のみ | 🔴 高 |

### 🔧 高度ソート（sortBy）

| 機能 | 公式記載 | 発見確認 | 例 |
|------|----------|---------|-----|
| **sortBy システム** | ❌ | ✅ | `models_v9:field:direction` |
| **チップ数順** | ❌ | ✅ | `metrics.tippedAmountCount:desc` |
| **カスタムフィールド** | ❌ | ✅ | `stats.downloadCount:asc` |

---

## 🏷️ カテゴリシステム比較

### 🆕 発見されたカテゴリ機能（非公式）

| カテゴリ | 公式記載 | 発見確認 | WebUI対応 | API対応 |
|---------|----------|---------|-----------|---------|
| **action** | ❌ | ✅ | ✅ | ✅ |
| **animal** | ❌ | ✅ | ✅ | ✅ |
| **assets** | ❌ | ✅ | ✅ | ✅ |
| **background** | ❌ | ✅ | ✅ | ✅ |
| **base model** | ❌ | ✅ | ✅ | ✅ |
| **buildings** | ❌ | ✅ | ✅ | ✅ |
| **celebrity** | ❌ | ✅ | ✅ | ✅ |
| **character** | ❌ | ✅ | ✅ | ✅ |
| **clothing** | ❌ | ✅ | ✅ | ✅ |
| **concept** | ❌ | ✅ | ✅ | ✅ |
| **objects** | ❌ | ✅ | ✅ | ✅ |
| **poses** | ❌ | ✅ | ✅ | ✅ |
| **style** | ❌ | ✅ | ✅ | ✅ |
| **tool** | ❌ | ✅ | ✅ | ✅ |
| **vehicle** | ❌ | ✅ | ✅ | ✅ |

### 🎯 カテゴリ × タグ × タイプの3重フィルタリング

| 機能 | 公式記載 | 発見確認 | 例 |
|------|----------|---------|-----|
| **複合フィルタ** | ❌ | ✅ | `?category=character&tags=anime&types=LORA` |

---

## 📈 期間指定比較

### ✅ 公式period値

| 期間 | 公式記載 | 発見確認 |
|------|----------|---------|
| **AllTime** | ✅ | ✅ |
| **Year** | ✅ | ✅ |
| **Month** | ✅ | ✅ |
| **Week** | ✅ | ✅ |
| **Day** | ✅ | ✅ |

---

## ⚠️ リスク分析

### 🔴 高リスク機能（要注意）

| 機能 | リスク理由 | 推奨対応 |
|------|-----------|---------|
| **sortBy システム** | 完全に非公式、構文が特殊 | fallback実装必須 |
| **Most Buzz** | sortByでのみ利用可能 | エラーハンドリング必須 |

### 🟡 中リスク機能（注意）

| 機能 | リスク理由 | 推奨対応 |
|------|-----------|---------|
| **category パラメータ** | 全15種類が非公式 | 代替手段の準備 |
| **追加ソートオプション** | 6種類が非公式 | 公式ソートへのfallback |
| **追加モデルタイプ** | 7種類が非公式 | 型チェックの強化 |
| **baseModels** | 全リストが非公式 | バリデーション強化 |

### 🟢 低リスク機能（比較的安全）

| 機能 | 理由 | 備考 |
|------|-----|------|
| **基本エンドポイント** | 公式対応済み | 安全に利用可能 |
| **基本パラメータ** | 公式記載済み | 安全に利用可能 |
| **period値** | 公式対応済み | 安全に利用可能 |

---

## 💡 実装推奨事項

### 1. 段階的フォールバック戦略

```python
def safe_api_call(params):
    # 1. 拡張機能を試行
    try:
        return call_with_extended_features(params)
    except:
        # 2. 公式機能にフォールバック
        return call_with_official_features(params)
```

### 2. 機能検出ロジック

```python
def detect_available_features():
    """利用可能な機能を動的検出"""
    official_features = test_official_api()
    extended_features = test_extended_api()
    return {
        'official': official_features,
        'extended': extended_features,
        'risk_level': calculate_risk(extended_features)
    }
```

### 3. 設定ベース機能選択

```python
# 保守的設定（公式のみ）
CONFIG = {
    'use_official_only': True,
    'enable_categories': False,
    'enable_advanced_sort': False
}

# 積極的設定（全機能）
CONFIG = {
    'use_official_only': False,
    'enable_categories': True,
    'enable_advanced_sort': True,
    'fallback_enabled': True
}
```

---

## 📊 統計サマリー

### 公式 vs 発見機能の割合

| カテゴリ | 公式機能数 | 発見機能数 | 非公式割合 |
|---------|----------|----------|-----------|
| **エンドポイント** | 3個 | 4個 | 25% |
| **基本パラメータ** | 11個 | 18個 | 39% |
| **モデルタイプ** | 7個 | 13個 | 46% |
| **ソートオプション** | 3個 | 10個 | 70% |
| **カテゴリ** | 0個 | 15個 | 100% |

### 全体統計

- **総発見機能数**: 60個
- **公式記載機能数**: 24個  
- **非公式機能数**: 36個
- **非公式機能割合**: **60%**

---

## 📝 まとめ

### 主要な発見

1. **実際のAPIは公式ドキュメントより遥かに豊富**
2. **60%の機能が非公式（リスク含む）**
3. **カテゴリシステムは完全に非公開**
4. **高度ソート機能は隠れた強力ツール**

### 推奨戦略

1. **デュアルAPIアプローチ**: 公式 + 非公式の使い分け
2. **リスクベース実装**: 機能ごとのリスク評価
3. **動的機能検出**: APIの変更に対する柔軟性
4. **フォールバック設計**: 非公式機能の停止に備えた代替手段

この分析により、CivitAI APIの真の能力と公式ドキュメントのギャップが明らかになりました。開発者は機能の豊富さとリスクのバランスを考慮した実装戦略を採用することが重要です。

---

**調査完了日**: 2025年07月18日  
**次回更新推奨**: API仕様変更時または新機能発見時